(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{48:function(e,t,a){e.exports=a(64)},53:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(25),l=a.n(i),o=(a(53),a(17)),c=a(18),s=a(20),u=a(19),d=a(23),m=a(9),b=a(66),p=a(26);function h(){var e=Object(p.a)(["\n  mutation($id: ID!) {\n    removeBike(id: $id) {\n      id\n      title\n    }\n  }\n"]);return h=function(){return e},e}function v(){var e=Object(p.a)(["\n query($id: ID){\n   bike(id: $id){\n     id\n     title\n     type\n     creator{\n       id\n       name\n       age\n       bikes{\n         id\n         title\n       }\n     }\n   }\n }"]);return v=function(){return e},e}function k(){var e=Object(p.a)(["\n  mutation($title: String!, $type: String!, $creatorId: ID!) {\n    addBike(title: $title, type: $type, creatorId: $creatorId) {\n      id\n      title\n    }\n  }\n"]);return k=function(){return e},e}function y(){var e=Object(p.a)(["\n  {\n    creators{\n      id\n      name\n    }\n  }\n"]);return y=function(){return e},e}function E(){var e=Object(p.a)(["\n{\n  bikes{\n    id\n    title\n  }\n}\n"]);return E=function(){return e},e}var f=Object(d.b)(E()),j=Object(d.b)(y()),O=Object(d.b)(k()),g=Object(d.b)(v()),C=Object(d.b)(h()),B=a(24),I=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"removeBike",value:function(e){e.preventDefault(),this.props.removeBikeMutation({variables:{id:this.props.bikeId},refetchQueries:[{query:f}]})}},{key:"render",value:function(){return r.a.createElement(B.a,{type:"button",variant:"danger",onClick:this.removeBike.bind(this)},"Remove")}}]),a}(n.Component),F=Object(b.a)(C,{name:"removeBikeMutation"})(I),S=a(33),N=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"displayBikeDetails",value:function(){var e=this.props.data,t=e.bike,a=e.loading,n=e.error;return a&&!n?r.a.createElement(S.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading bike details...")):n?r.a.createElement("div",null,"Error while loading the bike details..."):t?r.a.createElement("div",null,r.a.createElement("h2",null,t.title),r.a.createElement("p",null,"Type: ",t.type),r.a.createElement("p",null,"Creator: ",t.creator.name),r.a.createElement("p",null,"All bikes by this creator:"),r.a.createElement("ul",{className:"other-bikes"},t.creator.bikes.map((function(e){return r.a.createElement("li",{key:e.id},e.title)})))):void 0}},{key:"render",value:function(){return r.a.createElement("div",{id:"bike-details"},this.displayBikeDetails())}}]),a}(n.Component),$=Object(b.a)(g,{options:function(e){return{variables:{id:e.bikeId}}}})(N),w=a(27),D=a(35),T=a(34),q=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={selected:null,error:!1},n}return Object(c.a)(a,[{key:"displayBikes",value:function(){var e=this,t=this.props.data;return t.loading&&!t.error?r.a.createElement(S.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading bikes...")):t.error?(this.state.error||this.setState({error:!0}),r.a.createElement("div",null,"Error while loading bikes...")):t.bikes.length>0?t.bikes.map((function(t,a){return r.a.createElement(w.a,{key:a},r.a.createElement(w.a.Header,null,r.a.createElement("div",{className:"row justify-content-between"},r.a.createElement(D.a.Toggle,{className:"col-2",as:B.a,variant:"light",eventKey:t.id,onClick:function(a){e.setState({selected:t.id})}},t.title),r.a.createElement(F,{className:"col-2",bikeId:t.id}))),r.a.createElement(D.a.Collapse,{eventKey:t.id},r.a.createElement(w.a.Body,null,r.a.createElement($,{bikeId:e.state.selected}))))})):r.a.createElement(w.a,null,r.a.createElement(w.a.Header,null,"We don't have any bike yet. Feel free to add one!"))}},{key:"render",value:function(){return r.a.createElement(T.a,{id:"bike-list",className:"p-2"},r.a.createElement("h2",null,"All the bikes we have"),r.a.createElement(D.a,{id:"bike-list"},this.displayBikes()))}}]),a}(n.Component),L=Object(b.a)(f)(q),M=a(47),A=a(14),x=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={title:"",type:"",creatorId:"",error:!1,validated:!1},n}return Object(c.a)(a,[{key:"displayCreators",value:function(){var e=this.props.getCreatorsQuery;return e.loading&&!e.error?r.a.createElement("option",null,"Loading creators..."):e.error?(this.state.error||this.setState({error:!0}),null):e.creators.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))}},{key:"submitForm",value:function(e){var t=e.currentTarget;!1===t.checkValidity()?(e.preventDefault(),e.stopPropagation()):(e.preventDefault(),this.props.addBikeMutation({variables:{title:this.state.title,type:this.state.type,creatorId:this.state.creatorId},refetchQueries:[{query:f}]})),this.setState({validated:!0}),t.reset()}},{key:"render",value:function(){var e=this;return r.a.createElement(T.a,{id:"addBike",className:"p-2"},r.a.createElement("h2",null,"Add a bike"),r.a.createElement(A.a,{noValidate:!0,validated:this.state.validated,id:"add-bike-form",onSubmit:this.submitForm.bind(this)},r.a.createElement(A.a.Group,null,r.a.createElement(A.a.Label,{htmlFor:"formTitle"},"Bike title:"),r.a.createElement(A.a.Control,{value:this.state.title,onChange:function(t){return e.setState({title:t.target.value})},required:!0,id:"formTitle",type:"text",placeholder:"Enter the bike's title"}),r.a.createElement(A.a.Control.Feedback,null,"Good choice!"),r.a.createElement(A.a.Control.Feedback,{type:"invalid"},"Please provide a title.")),r.a.createElement(A.a.Group,null,r.a.createElement(A.a.Label,{htmlFor:"formType"},"Type:"),r.a.createElement(A.a.Control,{value:this.state.type,onChange:function(t){return e.setState({type:t.target.value})},required:!0,id:"formType",type:"text",placeholder:"Enter the bike's type"}),r.a.createElement(A.a.Control.Feedback,null,"My favourite type of bike"),r.a.createElement(A.a.Control.Feedback,{type:"invalid"},"I think you forgot the type.")),r.a.createElement(A.a.Group,null,r.a.createElement(A.a.Label,{htmlFor:"formCreator"},"Select a creator:"),r.a.createElement(A.a.Control,{value:this.state.creatorId,onChange:function(t){return e.setState({creatorId:t.target.value})},required:!0,id:"formCreator",as:"select"},r.a.createElement("option",{value:""},"--- Choose a creator --- "),this.displayCreators()),r.a.createElement(A.a.Control.Feedback,null,"Nice choice!"),r.a.createElement(A.a.Control.Feedback,{type:"invalid"},"Each bike has a creator, please choose one")),r.a.createElement(B.a,{className:"mr-1",variant:"dark",type:"submit"},"Add bike")))}}]),a}(n.Component),G=Object(M.flowRight)([Object(b.a)(j,{name:"getCreatorsQuery"}),Object(b.a)(O,{name:"addBikeMutation"})])(x),Q=new d.a({uri:"http://localhost:4000/graphql"}),J=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(m.b,{client:Q},r.a.createElement("div",{id:"main"},r.a.createElement("h1",{className:"text-center p-2"},"Just A Bike List"),r.a.createElement(G,null),r.a.createElement(L,null)))}}]),a}(n.Component);a(62);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(J,null)),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.02870eba.chunk.js.map